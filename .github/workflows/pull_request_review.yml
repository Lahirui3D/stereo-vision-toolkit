name: Pull Request Review

# only trigger on main branch pull request open / edit events
# used to test code before merging
on:
  pull_request:
    branches: [ main ]
    types: [ opened, edited, synchronize, reopened ]


jobs:
    build:
        # [DISABLED] until faster build process is implemented
        # TODO improve automated build speed
        #runs-on: windows-latest
        runs-on: ubuntu-latest
        steps:
          - uses: actions/checkout@v2
          # Checkout submodules (required for fever module used in app update system)
          # - name: Checkout submodules
          #   run: git submodule update --init --recursive
          # # Setup build environment
          # - name: Install Qt
          #   uses: jurplel/install-qt-action@v2
          #   with:
          #     version: '5.14.2'
          #     host: 'windows'
          #     target: 'desktop'
          #     arch: 'win64_msvc2017_64'
          #     dir: '${{ github.workspace }}/qt-install/'
          #     install-deps: 'true'
          #     modules: 'qtwebengine'
          #     tools-only: 'false'
          # - name: Install jom and inno setup
          #   shell: cmd
          #   run: | 
          #     choco install jom
          #     choco install innosetup
          # # Install 3rd party dependencies
          # - name: Install 3rdparty
          #   shell: cmd
          #   run: |
          #     call "%programfiles(x86)%\Microsoft Visual Studio\2019\Enterprise\VC\Auxiliary\Build\vcvars64.bat"
          #     .\scripts\3rdparty.bat
          # # Build application
          # - name: Build
          #   shell: cmd
          #   run: |
          #     call "%programfiles(x86)%\Microsoft Visual Studio\2019\Enterprise\VC\Auxiliary\Build\vcvars64.bat"
          #     mkdir build
          #     cd build
          #     qmake.exe "CONFIG+=qtquickcompiler CONFIG+=WITH_I3DRSGM" ../stereo_vision_toolkit.pro -spec win32-msvc
